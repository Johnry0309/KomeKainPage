{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KOMEKAIN â€” Korean Ã— Filipino</title>

  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

<header class="nav">
  <a class="brand" href="#top">
    <img src="{% static 'img/komekain-logo.png' %}" alt="Logo" class="nav-logo">
    KomeKain
  </a>
  <nav>
    <a href="#about">About</a>
    <a href="#Musubi">Musubi</a>
    <a href="#Onigiri">Onigiri</a>
    <a href="#ricebowls">Bowls</a>
    <a href="#drinks">Drinks</a>
    <a href="#hours">Hours</a>
    <a href="#grill">Bazaar</a>
    <a href="#contact">Contact</a>
  </nav>
</header>

<main id="top">

<!-- HERO -->
<section class="hero">
  <div class="hero-inner">

    <div id="carouselExample" class="carousel slide carousel-fade"
         data-bs-ride="carousel" data-bs-interval="4000"
         data-bs-wrap="true" data-bs-pause="false">

      <div class="carousel-indicators">
        {% for image in carousel_images %}
        <button type="button"
                data-bs-target="#carouselExample"
                data-bs-slide-to="{{ forloop.counter0 }}"
                class="{% if forloop.first %}active{% endif %}"
                {% if forloop.first %}aria-current="true"{% endif %}
                aria-label="Slide {{ forloop.counter }}">
        </button>
        {% endfor %}
      </div>

      <div class="carousel-inner">
        {% for image in carousel_images %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <img src="{% static image %}" alt="Slide {{ forloop.counter }}">
        </div>
        {% endfor %}
      </div>

      <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>

      <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>

    </div>

    <a class="cta" href="#Musubi">Explore Menu</a>
  </div>
</section>

<!-- ABOUT -->
<section class="section" id="about">
  <div class="about-box">
    <h3 class="muted">About</h3>
    <p>
      <strong>KomeKain & Co</strong> is a family-owned small business,
      where every bite is a story of family, passion, and bold flavors.
      From our home kitchen, we handcraft our musubi and onigiri with care and love.
    </p>
  </div>
</section>

<!-- MENU SECTIONS -->
{% for sec in menu_sections %}
<section class="section" id="{{ sec.anchor }}">
  <div class="wrap">
    <h1 class="muted">{{ sec.title }}</h1>
    <ul class="menu-list">

      {% for item in sec.items %}
      <li class="menu-item">
        <a href="{{ item.link }}" class="menu-card">
          <div class="menu-photo-box">
            <img src="{% static item.photo %}" alt="{{ item.name }}" class="menu-photo">
          </div>
          <div class="menu-info">
            <h3>{{ item.name }}</h3>
            <p>{{ item.desc }}</p>
            <span class="menu-price">{{ item.price }}</span>
          </div>
        </a>
      </li>
      {% endfor %}

    </ul>
  </div>
</section>
{% endfor %}

<!-- HOURS -->
<section class="section" id="hours">
  <div class="wrap">
    <h2 class="muted">Hours</h2>
    <div class="hours">
      {% for day, time in hours %}
      <div class="hours-row"><span>{{ day }}</span><span>{{ time }}</span></div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- â­â­â­ BAZAAR â€” Video Playlist â­â­â­ -->
<section class="section" id="grill">
  <div class="wrap">
    <h1 class="muted">Bazaar</h1>

    <div class="video-player-box">
      <video id="bazaarPlayer" class="video-player" preload="auto" playsinline></video>

      <div class="video-controls">
        <button id="prevVid" class="btn btn-outline-dark">Previous</button>
        <button id="nextVid" class="btn btn-outline-dark">Next</button>
      </div>
    </div>
  </div>
</section>

</main>

<!-- FOOTER -->
<footer class="footer" id="contact">
  <div class="wrap">
    <h2 class="muted">Contact</h2>

    <div class="social-icons">
      <a href="https://www.facebook.com/profile.php?id=61579246496644" target="_blank"><img src="{% static 'img/facebook-icon.svg' %}" alt=""></a>
      <a href="https://www.instagram.com/kome_kain/" target="_blank"><img src="{% static 'img/instagram-icon.svg' %}" alt=""></a>
      <a href="https://www.tiktok.com/@komekain" target="_blank"><img src="{% static 'img/tiktok-icon-free-png.svg' %}" alt=""></a>
    </div>

    <p class="small follow-text">Follow us for cravings, chika, and surprises! ðŸ’•</p>
  </div>

  <div class="wrap">
    <a href="https://m.me/61579246496644" target="_blank" class="messenger-btn">ðŸ’¬ Message Us</a>
    <p class="small muted">in Messenger.</p>
    <p class="small">Â©{{ now|date:"Y" }} KomeKain.co</p>
  </div>
</footer>

<a href="#top" class="backtotop" aria-label="Back to top">â†‘</a>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Smooth Scroll
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.addEventListener('click', e=>{
    const target=document.querySelector(a.getAttribute('href'));
    if(target){ e.preventDefault(); target.scrollIntoView({behavior:'smooth'}); }
  });
});

// Back to top visibility
const btt=document.querySelector(".backtotop");
window.addEventListener("scroll",()=>{
  if(window.scrollY>600) btt.classList.add("show"); else btt.classList.remove("show");
});

/* â­ Bazaar Playlist â­ */
const bazaarPlaylist=[
  "{% static 'videos/bazaar0.mp4' %}",
  "{% static 'videos/bazaar1.mp4' %}",
  "{% static 'videos/bazaar2.mp4' %}",
  "{% static 'videos/bazaar3.mp4' %}"
];

let vidIndex=0;
const player=document.getElementById("bazaarPlayer");

function loadBazaarVideo(i){
  const src=bazaarPlaylist[i];
  if(player.getAttribute("src")!==src){
    player.src=src;
  }
  player.play().catch(()=>{});
}

document.getElementById("nextVid").onclick=()=>{
  vidIndex=(vidIndex+1)%bazaarPlaylist.length;
  loadBazaarVideo(vidIndex);
};

document.getElementById("prevVid").onclick=()=>{
  vidIndex=(vidIndex-1+bazaarPlaylist.length)%bazaarPlaylist.length;
  loadBazaarVideo(vidIndex);
};

player.onended=()=>{
  vidIndex=(vidIndex+1)%bazaarPlaylist.length;
  loadBazaarVideo(vidIndex);
};

// first load
loadBazaarVideo(vidIndex);

/* â­ Autoplay on scroll â­ */
const bazaarSection=document.querySelector("#grill");
const observer=new IntersectionObserver((entries)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting) player.play();
    else player.pause();
  });
},{threshold:0.6});
observer.observe(bazaarSection);
</script>

<style>
/* CAROUSEL */
.hero { padding:0; }

#carouselExample { width:100%; background:#f3d3b5; }
#carouselExample .carousel-item img {
  width:100%; height:100%; object-fit:cover;
  background:#f3d3b5;
}

/* ABOUT */
.about-box {
  background:#fafafa; padding:50px 30px;
  border-radius:16px; text-align:center;
  max-width:800px; margin:auto;
}

/* VIDEO PLAYER */
.video-player-box {
  padding:20px;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
}

.video-player {
  max-width:400px; width:100%;
  background:#000; object-fit:contain;
}

.video-controls button { margin:8px; }

/* Responsive */
@media(max-width:576px){
  .video-player { max-width:100%; }
}
</style>

</body>
</html>
